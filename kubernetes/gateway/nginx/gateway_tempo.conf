server {
    listen 3200;
    listen [::]:3200;

    location = / {
        return 200 'OK';
        auth_basic off;
        access_log off;
    }

    # Query Front End
    location ~ /api/traces/.* {
        proxy_pass http://${TEMPO_FRONTEND_HOST}:3200$request_uri;
    }
    location ~ /api/search/.* {
        proxy_pass http://${TEMPO_FRONTEND_HOST}:3200$request_uri;
    }

    location ~ /api/v2/.* {
        proxy_pass http://${TEMPO_FRONTEND_HOST}:3200$request_uri;
    }

    location = /api/echo {
        proxy_pass http://${TEMPO_FRONTEND_HOST}:3200$request_uri;
    }

    location = /api/overrides {
        proxy_pass http://${TEMPO_FRONTEND_HOST}:3200$request_uri;
    }

    location = /status {
        proxy_pass http://${TEMPO_FRONTEND_HOST}:3200$request_uri;
    }

    location = /api/status/buildinfo {
        proxy_pass http://${TEMPO_FRONTEND_HOST}:3200$request_uri;
    }


    # Distributor

    location = /distributor/ring {
        proxy_pass http://${TEMPO_DISTRIBUTOR_HOST}:3200$request_uri;
    }

    # Ingester

    location = /api/traces {
        proxy_pass http://${TEMP_INGESTER_HOST}:3200$request_uri;
    }

    location = /ingester/ring {
        proxy_pass http://${TEMP_INGESTER_HOST}:3200$request_uri;
    }

    location = /memberlist {
        proxy_pass http://${TEMP_INGESTER_HOST}:3200$request_uri;
    }


    # Compactor


}